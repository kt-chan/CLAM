{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "4. Model Evaluation",
            "type": "debugpy",
            "request": "launch",
            "program": "eval.py",
            "console": "integratedTerminal",
            "python": "${command:python.interpreterPath}",
            // --- Environment Variable for GPU ---
            // Sets CUDA_VISIBLE_DEVICES to 0 for this run
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            },
            // --- Script Arguments ---
            "args": [
                "--k",
                "2",
                "--models_exp_code",
                "task_3_tumor_count_resnet50",
                "--save_exp_code",
                "task_3_tumor_count_resnet50_cv",
                "--task",
                "task_3_tumor_count",
                "--model_type",
                "clam_mb",
                "--results_dir",
                "results",
                "--data_root_dir",
                "./data/features/",
                "--data_set_name",
                "TCGA",
                "--embed_dim",
                "1024"
            ]
        },
        {
            "name": "3. Model Training",
            "type": "debugpy",
            "request": "launch",
            "program": "train.py",
            "console": "integratedTerminal",
            "python": "${command:python.interpreterPath}",
            // --- Environment Variable for GPU ---
            // Sets CUDA_VISIBLE_DEVICES to 0 for this run
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            },
            // --- Script Arguments ---
            "args": [
                "--max_epochs",
                "2",
                "--drop_out",
                "0.25",
                "--early_stopping",
                "--lr",
                "2e-4",
                "--k",
                "2",
                "--exp_code",
                "task_3_tumor_count_resnet50",
                "--weighted_sample",
                "--bag_loss",
                "ce",
                "--inst_loss",
                "svm",
                "--task",
                "task_3_tumor_count",
                "--model_type",
                "clam_mb",
                "--log_data",
                "--data_root_dir",
                "./data/features/",
                "--data_set_name",
                "TCGA",
                "--embed_dim",
                "1024"
            ]
        },
        {
            "name": "2. Feature Extraction",
            "type": "debugpy",
            "request": "launch",
            "program": "extract_features_fp.py",
            "console": "integratedTerminal",
            "python": "${command:python.interpreterPath}",
            // --- Environment Variable for GPU ---
            // Sets CUDA_VISIBLE_DEVICES to 0 for this run
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            },
            // --- Script Arguments ---
            "args": [
                // Directory containing patch coordinates (.h5 files from the patching step)
                "--data_h5_dir",
                "./data/outputs/TCGA",
                // Directory containing the original WSI files (.svs)
                "--data_slide_dir",
                "./data/inputs/TCGA",
                // Directory where the final feature vectors (.pt files) will be saved
                "--feat_dir",
                "./data/features/TCGA",
                // Model encoder to use (e.g., resnet50_trunc, uni, conch)
                "--model_name",
                "resnet50_trunc",
                "--batch_size",
                "512",
                "--csv_path",
                "./data/outputs/TCGA/process_list_autogen.csv"
            ]
        },
        {
            "name": "1. Segmentation & Patching",
            "type": "debugpy",
            "request": "launch",
            "program": "create_patches_fp.py",
            "args": [
                "--source",
                "./data/inputs/TCGA",
                "--save_dir",
                "./data/outputs/TCGA",
                "--patch_size",
                "256",
                "--seg",
                "--patch",
                "--stitch"
            ],
            "console": "integratedTerminal"
        }
    ]
}